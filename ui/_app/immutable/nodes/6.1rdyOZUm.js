import{s as Y,a as B,g as L,i as w,f as m,k as R,e as _,c as v,l as H,m as g,n as T,t as y,b,d as C,h as f,j as X,o as Z}from"../chunks/scheduler.CSDhDYXB.js";import{S as ee,i as te,c as j,a as z,m as F,t as W,b as G,d as J}from"../chunks/index.BJ6aBsbe.js";import{e as K}from"../chunks/each.D6YF6ztN.js";import{S as ae}from"../chunks/SignupStore.BpfdaXyP.js";import{C as ne}from"../chunks/CurrentSelectedExtensionIdStore.B2SfE-HB.js";import{g as se,a as oe,s as re}from"../chunks/index.DY3vC1cw.js";import{$ as le}from"../chunks/CachedExtensionsStore.BIpYKcFJ.js";import{F as ie}from"../chunks/FooterButton.BuacVUim.js";import{P as ce}from"../chunks/PayloadConfirmation.CMU8BbNN.js";import{R as M}from"../chunks/RequestResponseStore.CKHc7ffz.js";import{D as pe}from"../chunks/DSNPSchemas.0SjUiJWi.js";function O(l,e,n){const t=l.slice();return t[6]=e[n],t}function de(l){let e,n="Now you have to sign the permissions";return{c(){e=_("span"),e.textContent=n,this.h()},l(t){e=v(t,"SPAN",{slot:!0,class:!0,"data-svelte-h":!0}),H(e)!=="svelte-9uknii"&&(e.textContent=n),this.h()},h(){g(e,"slot","heading"),g(e,"class","text-[16px] font-bold")},m(t,s){w(t,e,s)},p:T,d(t){t&&m(e)}}}function ue(l){let e,n,t=l[2].handle.baseHandle+"",s,a,r=".###";return{c(){e=_("span"),n=_("span"),s=y(t),a=_("span"),a.textContent=r,this.h()},l(d){e=v(d,"SPAN",{slot:!0});var i=b(e);n=v(i,"SPAN",{class:!0});var o=b(n);s=C(o,t),o.forEach(m),a=v(i,"SPAN",{class:!0,"data-svelte-h":!0}),H(a)!=="svelte-1m74y1j"&&(a.textContent=r),i.forEach(m),this.h()},h(){g(n,"class","text-[16px] font-semibold"),g(a,"class","font-medium text-neutral-400"),g(e,"slot","subheading")},m(d,i){w(d,e,i),f(e,n),f(n,s),f(e,a)},p(d,i){i&4&&t!==(t=d[2].handle.baseHandle+"")&&X(s,t)},d(d){d&&m(e)}}}function Q(l){let e,n=l[6].description+"",t;return{c(){e=_("li"),t=y(n),this.h()},l(s){e=v(s,"LI",{class:!0});var a=b(e);t=C(a,n),a.forEach(m),this.h()},h(){g(e,"class","text-base font-normal")},m(s,a){w(s,e,a),f(e,t)},p:T,d(s){s&&m(e)}}}function fe(l){var V;let e,n,t,s,a=((V=l[1].request)==null?void 0:V.providerName)+"",r,d,i,o=new URL(document.referrer).hostname+"",$,N,q,x,P,U="Create a new social identity on your behalf",A,E=K(l[3]),u=[];for(let c=0;c<E.length;c+=1)u[c]=Q(O(l,E,c));return{c(){e=_("div"),n=_("div"),t=_("span"),s=y('By clicking "Next" and signing the resulting payload, you authorize the provider "'),r=y(a),d=y(`", operating from the domain
        `),i=_("a"),$=y(o),N=y(", to do the following"),q=B(),x=_("ul"),P=_("li"),P.textContent=U,A=B();for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){e=v(c,"DIV",{slot:!0});var S=b(e);n=v(S,"DIV",{});var h=b(n);t=v(h,"SPAN",{class:!0});var p=b(t);s=C(p,'By clicking "Next" and signing the resulting payload, you authorize the provider "'),r=C(p,a),d=C(p,`", operating from the domain
        `),i=v(p,"A",{class:!0,href:!0});var D=b(i);$=C(D,o),D.forEach(m),N=C(p,", to do the following"),p.forEach(m),q=L(h),x=v(h,"UL",{class:!0});var k=b(x);P=v(k,"LI",{class:!0,"data-svelte-h":!0}),H(P)!=="svelte-1c0ty01"&&(P.textContent=U),A=L(k);for(let I=0;I<u.length;I+=1)u[I].l(k);k.forEach(m),h.forEach(m),S.forEach(m),this.h()},h(){g(i,"class","underline"),g(i,"href",document.referrer),g(t,"class","text-base font-bold"),g(P,"class","text-base font-normal"),g(x,"class","list-disc pl-6 pt-3"),g(e,"slot","payloadDescription")},m(c,S){w(c,e,S),f(e,n),f(n,t),f(t,s),f(t,r),f(t,d),f(t,i),f(i,$),f(t,N),f(n,q),f(n,x),f(x,P),f(x,A);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(x,null)},p(c,S){var h;if(S&2&&a!==(a=((h=c[1].request)==null?void 0:h.providerName)+"")&&X(r,a),S&8){E=K(c[3]);let p;for(p=0;p<E.length;p+=1){const D=O(c,E,p);u[p]?u[p].p(D,S):(u[p]=Q(D),u[p].c(),u[p].m(x,null))}for(;p<u.length;p+=1)u[p].d(1);u.length=E.length}},d(c){c&&m(e),Z(u,c)}}}function me(l){let e;return{c(){e=y("Next > Sign")},l(n){e=C(n,"Next > Sign")},m(n,t){w(n,e,t)},d(n){n&&m(e)}}}function he(l){let e,n,t,s;return e=new ce({props:{payload:l[0],$$slots:{payloadDescription:[fe],subheading:[ue],heading:[de]},$$scope:{ctx:l}}}),t=new ie({props:{$$slots:{default:[me]},$$scope:{ctx:l}}}),t.$on("click",l[4]),{c(){j(e.$$.fragment),n=B(),j(t.$$.fragment)},l(a){z(e.$$.fragment,a),n=L(a),z(t.$$.fragment,a)},m(a,r){F(e,a,r),w(a,n,r),F(t,a,r),s=!0},p(a,[r]){const d={};r&1&&(d.payload=a[0]),r&518&&(d.$$scope={dirty:r,ctx:a}),e.$set(d);const i={};r&512&&(i.$$scope={dirty:r,ctx:a}),t.$set(i)},i(a){s||(W(e.$$.fragment,a),W(t.$$.fragment,a),s=!0)},o(a){G(e.$$.fragment,a),G(t.$$.fragment,a),s=!1},d(a){a&&m(n),J(e,a),J(t,a)}}}function ge(l,e,n){let t,s,a;R(l,M,o=>n(1,t=o)),R(l,ae,o=>n(2,s=o)),R(l,ne,o=>n(5,a=o));let r,d=t.request.requiredSchemas.map(o=>{const $=pe.find(N=>N.name===o.name&&N.namespace===o.namespace&&N.version===o.version);return{...o,description:($==null?void 0:$.description)||`Update data associated with the ${o.name} schema`}});se(t.request.providerId,d.map(o=>o.id)).then(({bytes:o})=>{n(0,r=o)});async function i(){try{const o=await oe(a,s.address,r),$=(await le(s.address,{Sr25519:o.toString()},r)).toHex();M.upsertExtrinsic({pallet:"msa",extrinsicName:"createSponsoredAccountWithDelegation",encodedExtrinsic:$}),await re(t.response)}catch(o){console.error("Payload not signed",o)}}return[r,t,s,d,i]}class we extends ee{constructor(e){super(),te(this,e,ge,he,Y,{})}}export{we as component};
