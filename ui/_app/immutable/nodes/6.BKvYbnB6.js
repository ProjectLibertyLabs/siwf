import{S as Y,i as Z,s as ee,d as h,m as z,o as F,p as V,q as W,b as E,r as G,h as B,u as J,k as L,l as R,n as T,v as g,e as _,w as H,j as v,a as X,c as f,f as y,g as b,t as C,x as te}from"../chunks/DDfy8cKU.js";import{e as K}from"../chunks/D6YF6ztN.js";import"../chunks/IHki7fMi.js";import{g as ne,a as ae,p as se,s as oe,S as re}from"../chunks/Co0xxR5R.js";import{C as le}from"../chunks/DJ4pjELr.js";import{F as ie}from"../chunks/BhBRXKnp.js";import{P as ce}from"../chunks/DhrUCORO.js";import{R as M}from"../chunks/BWmspDa1.js";import{D as pe}from"../chunks/0SjUiJWi.js";function O(l,e,a){const t=l.slice();return t[6]=e[a],t}function ue(l){let e,a="Now you have to sign the permissions";return{c(){e=v("span"),e.textContent=a,this.h()},l(t){e=_(t,"SPAN",{slot:!0,class:!0,"data-svelte-h":!0}),H(e)!=="svelte-9uknii"&&(e.textContent=a),this.h()},h(){g(e,"slot","heading"),g(e,"class","text-[16px] font-bold")},m(t,s){E(t,e,s)},p:T,d(t){t&&h(e)}}}function de(l){let e,a,t=l[2].handle.baseHandle+"",s,n,r=".###";return{c(){e=v("span"),a=v("span"),s=C(t),n=v("span"),n.textContent=r,this.h()},l(u){e=_(u,"SPAN",{slot:!0});var i=y(e);a=_(i,"SPAN",{class:!0});var o=y(a);s=b(o,t),o.forEach(h),n=_(i,"SPAN",{class:!0,"data-svelte-h":!0}),H(n)!=="svelte-1m74y1j"&&(n.textContent=r),i.forEach(h),this.h()},h(){g(a,"class","text-[16px] font-semibold"),g(n,"class","font-medium text-neutral-400"),g(e,"slot","subheading")},m(u,i){E(u,e,i),f(e,a),f(a,s),f(e,n)},p(u,i){i&4&&t!==(t=u[2].handle.baseHandle+"")&&X(s,t)},d(u){u&&h(e)}}}function Q(l){let e,a=l[6].description+"",t;return{c(){e=v("li"),t=C(a),this.h()},l(s){e=_(s,"LI",{class:!0});var n=y(e);t=b(n,a),n.forEach(h),this.h()},h(){g(e,"class","text-base font-normal")},m(s,n){E(s,e,n),f(e,t)},p:T,d(s){s&&h(e)}}}function fe(l){var j;let e,a,t,s,n=((j=l[1].request)==null?void 0:j.providerName)+"",r,u,i,o=new URL(document.referrer).hostname+"",x,N,A,S,P,U="Create a new social identity on your behalf",k,w=K(l[3]),d=[];for(let c=0;c<w.length;c+=1)d[c]=Q(O(l,w,c));return{c(){e=v("div"),a=v("div"),t=v("span"),s=C('By clicking "Next" and signing the resulting payload, you authorize the provider "'),r=C(n),u=C(`", operating from the domain
        `),i=v("a"),x=C(o),N=C(", to do the following"),A=L(),S=v("ul"),P=v("li"),P.textContent=U,k=L();for(let c=0;c<d.length;c+=1)d[c].c();this.h()},l(c){e=_(c,"DIV",{slot:!0});var $=y(e);a=_($,"DIV",{});var m=y(a);t=_(m,"SPAN",{class:!0});var p=y(t);s=b(p,'By clicking "Next" and signing the resulting payload, you authorize the provider "'),r=b(p,n),u=b(p,`", operating from the domain
        `),i=_(p,"A",{class:!0,href:!0});var D=y(i);x=b(D,o),D.forEach(h),N=b(p,", to do the following"),p.forEach(h),A=B(m),S=_(m,"UL",{class:!0});var q=y(S);P=_(q,"LI",{class:!0,"data-svelte-h":!0}),H(P)!=="svelte-1c0ty01"&&(P.textContent=U),k=B(q);for(let I=0;I<d.length;I+=1)d[I].l(q);q.forEach(h),m.forEach(h),$.forEach(h),this.h()},h(){g(i,"class","underline"),g(i,"href",document.referrer),g(t,"class","text-base font-bold"),g(P,"class","text-base font-normal"),g(S,"class","list-disc pl-6 pt-3"),g(e,"slot","payloadDescription")},m(c,$){E(c,e,$),f(e,a),f(a,t),f(t,s),f(t,r),f(t,u),f(t,i),f(i,x),f(t,N),f(a,A),f(a,S),f(S,P),f(S,k);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(S,null)},p(c,$){var m;if($&2&&n!==(n=((m=c[1].request)==null?void 0:m.providerName)+"")&&X(r,n),$&8){w=K(c[3]);let p;for(p=0;p<w.length;p+=1){const D=O(c,w,p);d[p]?d[p].p(D,$):(d[p]=Q(D),d[p].c(),d[p].m(S,null))}for(;p<d.length;p+=1)d[p].d(1);d.length=w.length}},d(c){c&&h(e),te(d,c)}}}function he(l){let e;return{c(){e=C("Next > Sign")},l(a){e=b(a,"Next > Sign")},m(a,t){E(a,e,t)},d(a){a&&h(e)}}}function me(l){let e,a,t,s;return e=new ce({props:{payload:l[0],$$slots:{payloadDescription:[fe],subheading:[de],heading:[ue]},$$scope:{ctx:l}}}),t=new ie({props:{$$slots:{default:[he]},$$scope:{ctx:l}}}),t.$on("click",l[4]),{c(){J(e.$$.fragment),a=L(),J(t.$$.fragment)},l(n){G(e.$$.fragment,n),a=B(n),G(t.$$.fragment,n)},m(n,r){W(e,n,r),E(n,a,r),W(t,n,r),s=!0},p(n,[r]){const u={};r&1&&(u.payload=n[0]),r&518&&(u.$$scope={dirty:r,ctx:n}),e.$set(u);const i={};r&512&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i(n){s||(V(e.$$.fragment,n),V(t.$$.fragment,n),s=!0)},o(n){F(e.$$.fragment,n),F(t.$$.fragment,n),s=!1},d(n){n&&h(a),z(e,n),z(t,n)}}}function ge(l,e,a){let t,s,n;R(l,M,o=>a(1,t=o)),R(l,re,o=>a(2,s=o)),R(l,le,o=>a(5,n=o));let r,u=t.request.requiredSchemas.map(o=>{const x=pe.find(N=>N.name===o.name&&N.namespace===o.namespace&&N.version===o.version);return{...o,description:(x==null?void 0:x.description)||`Update data associated with the ${o.name} schema`}});ne(t.request.providerId,u.map(o=>o.id)).then(({bytes:o})=>{a(0,r=o)});async function i(){try{const o=await ae(n,s.address,r),x=(await se(s.address,{Sr25519:o.toString()},r)).toHex();M.upsertExtrinsic({pallet:"msa",extrinsicName:"createSponsoredAccountWithDelegation",encodedExtrinsic:x}),await oe(t.response)}catch(o){console.error("Payload not signed",o)}}return[r,t,s,u,i]}class Pe extends Y{constructor(e){super(),Z(this,e,ge,me,ee,{})}}export{Pe as component};
