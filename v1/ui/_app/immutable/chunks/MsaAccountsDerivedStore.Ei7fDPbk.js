import{d as i}from"./index.BFANTigx.js";import{C as j}from"./ConnectedExtensionsDerivedStore.CZjRchbt.js";import{f as p,h as w}from"./CachedExtensionsStore.BR3g8_I7.js";import{C as A}from"./CurrentSelectedExtensionIdStore.CXocgOrF.js";function M(n,o,c){const s=(n==null?void 0:n[o.address])??{...o,wallets:new Set};s.wallets.add(c),n[o.address]=s}const d=i([j],([n],o)=>{const c={};if(n){const s=n;for(const e of Object.values(s))for(const t of e.accounts)M(c,t,e.injectedName)}o(c)},{}),f=i([d,A],([n,o])=>{const c=Object.entries(n).filter(([e,t])=>t.wallets.has(o));return c.forEach(([e,t])=>{t.wallets=new Set([o])}),c.reduce((e,[t,r])=>(e[t]=r,e),{})});function l(n){return i([n],([o],c)=>{const s=Object.entries(o);p(s.map(([e])=>e)).then(e=>{const t={};for(const[r,a]of e.entries()){if(a.msaId==="0")continue;const u=(t==null?void 0:t[a.msaId])||{...a,accounts:{}},[S,v]=s[r];u.accounts[S]=v,t[a.msaId]=u}c(t)})},{})}function m(n){return i([n],([o],c)=>{const s=Object.entries(o);w(s.map(([e])=>e)).then(e=>{const t={};for(const[r,a]of e.entries())a==="0"&&(t[s[r][0]]=s[r][1]);c(t)})},{})}l(d);const F=l(f);m(d);const I=m(f);export{I as F,F as a};
