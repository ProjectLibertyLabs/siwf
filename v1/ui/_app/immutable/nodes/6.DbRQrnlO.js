import{s as Y,d as m,i as w,g as B,j as L,k as R,n as Q,l as g,c as _,m as H,h as v,a as X,b as f,e as y,f as b,t as C,o as Z}from"../chunks/CKFRV2U2.js";import{S as ee,i as te,d as z,t as F,a as V,m as W,c as T,b as G}from"../chunks/C4UniOSA.js";import{e as J}from"../chunks/D6YF6ztN.js";import{g as ae,a as ne,u as se,s as oe,S as re}from"../chunks/Bz1-qmYa.js";import{C as le}from"../chunks/D4AlWJD_.js";import{F as ie}from"../chunks/CcuJL688.js";import{P as ce}from"../chunks/mq_gOYpb.js";import{R as K}from"../chunks/BemOOD-p.js";import{D as pe}from"../chunks/0SjUiJWi.js";function M(l,e,n){const t=l.slice();return t[6]=e[n],t}function ue(l){let e,n="Now you have to sign the permissions";return{c(){e=v("span"),e.textContent=n,this.h()},l(t){e=_(t,"SPAN",{slot:!0,class:!0,"data-svelte-h":!0}),H(e)!=="svelte-9uknii"&&(e.textContent=n),this.h()},h(){g(e,"slot","heading"),g(e,"class","text-[16px] font-bold")},m(t,s){w(t,e,s)},p:Q,d(t){t&&m(e)}}}function de(l){let e,n,t=l[2].handle.baseHandle+"",s,a,r=".###";return{c(){e=v("span"),n=v("span"),s=C(t),a=v("span"),a.textContent=r,this.h()},l(u){e=_(u,"SPAN",{slot:!0});var i=y(e);n=_(i,"SPAN",{class:!0});var o=y(n);s=b(o,t),o.forEach(m),a=_(i,"SPAN",{class:!0,"data-svelte-h":!0}),H(a)!=="svelte-1m74y1j"&&(a.textContent=r),i.forEach(m),this.h()},h(){g(n,"class","text-[16px] font-semibold"),g(a,"class","font-medium text-neutral-400"),g(e,"slot","subheading")},m(u,i){w(u,e,i),f(e,n),f(n,s),f(e,a)},p(u,i){i&4&&t!==(t=u[2].handle.baseHandle+"")&&X(s,t)},d(u){u&&m(e)}}}function O(l){let e,n=l[6].description+"",t;return{c(){e=v("li"),t=C(n),this.h()},l(s){e=_(s,"LI",{class:!0});var a=y(e);t=b(a,n),a.forEach(m),this.h()},h(){g(e,"class","text-base font-normal")},m(s,a){w(s,e,a),f(e,t)},p:Q,d(s){s&&m(e)}}}function fe(l){var j;let e,n,t,s,a=((j=l[1].request)==null?void 0:j.providerName)+"",r,u,i,o=new URL(document.referrer).hostname+"",x,N,q,S,P,U="Create a new social identity on your behalf",A,E=J(l[3]),d=[];for(let c=0;c<E.length;c+=1)d[c]=O(M(l,E,c));return{c(){e=v("div"),n=v("div"),t=v("span"),s=C('By clicking "Next" and signing the resulting payload, you authorize the provider "'),r=C(a),u=C(`", operating from the domain
        `),i=v("a"),x=C(o),N=C(", to do the following"),q=L(),S=v("ul"),P=v("li"),P.textContent=U,A=L();for(let c=0;c<d.length;c+=1)d[c].c();this.h()},l(c){e=_(c,"DIV",{slot:!0});var $=y(e);n=_($,"DIV",{});var h=y(n);t=_(h,"SPAN",{class:!0});var p=y(t);s=b(p,'By clicking "Next" and signing the resulting payload, you authorize the provider "'),r=b(p,a),u=b(p,`", operating from the domain
        `),i=_(p,"A",{class:!0,href:!0});var D=y(i);x=b(D,o),D.forEach(m),N=b(p,", to do the following"),p.forEach(m),q=B(h),S=_(h,"UL",{class:!0});var k=y(S);P=_(k,"LI",{class:!0,"data-svelte-h":!0}),H(P)!=="svelte-1c0ty01"&&(P.textContent=U),A=B(k);for(let I=0;I<d.length;I+=1)d[I].l(k);k.forEach(m),h.forEach(m),$.forEach(m),this.h()},h(){g(i,"class","underline"),g(i,"href",document.referrer),g(t,"class","text-base font-bold"),g(P,"class","text-base font-normal"),g(S,"class","list-disc pl-6 pt-3"),g(e,"slot","payloadDescription")},m(c,$){w(c,e,$),f(e,n),f(n,t),f(t,s),f(t,r),f(t,u),f(t,i),f(i,x),f(t,N),f(n,q),f(n,S),f(S,P),f(S,A);for(let h=0;h<d.length;h+=1)d[h]&&d[h].m(S,null)},p(c,$){var h;if($&2&&a!==(a=((h=c[1].request)==null?void 0:h.providerName)+"")&&X(r,a),$&8){E=J(c[3]);let p;for(p=0;p<E.length;p+=1){const D=M(c,E,p);d[p]?d[p].p(D,$):(d[p]=O(D),d[p].c(),d[p].m(S,null))}for(;p<d.length;p+=1)d[p].d(1);d.length=E.length}},d(c){c&&m(e),Z(d,c)}}}function me(l){let e;return{c(){e=C("Next > Sign")},l(n){e=b(n,"Next > Sign")},m(n,t){w(n,e,t)},d(n){n&&m(e)}}}function he(l){let e,n,t,s;return e=new ce({props:{payload:l[0],$$slots:{payloadDescription:[fe],subheading:[de],heading:[ue]},$$scope:{ctx:l}}}),t=new ie({props:{$$slots:{default:[me]},$$scope:{ctx:l}}}),t.$on("click",l[4]),{c(){G(e.$$.fragment),n=L(),G(t.$$.fragment)},l(a){T(e.$$.fragment,a),n=B(a),T(t.$$.fragment,a)},m(a,r){W(e,a,r),w(a,n,r),W(t,a,r),s=!0},p(a,[r]){const u={};r&1&&(u.payload=a[0]),r&518&&(u.$$scope={dirty:r,ctx:a}),e.$set(u);const i={};r&512&&(i.$$scope={dirty:r,ctx:a}),t.$set(i)},i(a){s||(V(e.$$.fragment,a),V(t.$$.fragment,a),s=!0)},o(a){F(e.$$.fragment,a),F(t.$$.fragment,a),s=!1},d(a){a&&m(n),z(e,a),z(t,a)}}}function ge(l,e,n){let t,s,a;R(l,K,o=>n(1,t=o)),R(l,re,o=>n(2,s=o)),R(l,le,o=>n(5,a=o));let r,u=t.request.requiredSchemas.map(o=>{const x=pe.find(N=>N.name===o.name&&N.namespace===o.namespace&&N.version===o.version);return{...o,description:(x==null?void 0:x.description)||`Update data associated with the ${o.name} schema`}});ae(t.request.providerId,u.map(o=>o.id)).then(({bytes:o})=>{n(0,r=o)});async function i(){try{const o=await ne(a,s.address,r),x=(await se(s.address,{Sr25519:o.toString()},r)).toHex();K.upsertExtrinsic({pallet:"msa",extrinsicName:"createSponsoredAccountWithDelegation",encodedExtrinsic:x}),await oe(t.response)}catch(o){console.error("Payload not signed",o)}}return[r,t,s,u,i]}class Pe extends ee{constructor(e){super(),te(this,e,ge,he,Y,{})}}export{Pe as component};
